# xpcall

保護されたモードで関数を呼び出す（エラーハンドラを指定できる）

```lua
xpcall (f, err)
```

## 説明

この関数は`pcall`に似ていますが、新しいエラーハンドラを設定できます。

`xpcall`は`err`をエラーハンドラとして使用し、保護モードで関数`f`を呼び出します。`f`内の任意のエラーは伝播されません。代わりに、`xpcall`はエラーをキャッチし、元のエラーオブジェクトで`err`関数を呼び出し、ステータスコードを返します。最初の結果はステータスコード（真偽値）であり、エラーなしで呼び出しが成功した場合はtrueです。この場合、`xpcall`はこの最初の結果の後に、呼び出しからのすべての結果も返します。エラーが発生した場合、`xpcall`は`false`と`err`からの結果を返します。

## サンプルコード

```lua
local status, err = xpcall(function() error("error") end, function(e) return "Handled: " .. e end)
print(status, err)
```

この例では、エラーが発生してもエラーハンドラによって処理されます。

## 互換性

- Lua5.1

## 関連項目

- [`pcall`](pcall.md)